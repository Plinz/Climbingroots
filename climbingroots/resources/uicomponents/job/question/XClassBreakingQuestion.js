/*!
#set ($jsExtension = '.min.js')
#if (!$services.debug.minify)
  #set ($jsExtension = '.js')
#end
*/
require.config({paths:{jsTree:'$!services.webjars.url("jstree", "jstree$jsExtension")',JobRunner:'$!services.webjars.url("org.xwiki.platform:xwiki-platform-job-webjar", "jobRunner$jsExtension")',"tree-finder":'$!services.webjars.url("org.xwiki.platform:xwiki-platform-tree-webjar", "finder$jsExtension")',tree:'$!services.webjars.url("org.xwiki.platform:xwiki-platform-tree-webjar", "tree$jsExtension")'},shim:{jsTree:{deps:["jquery"]}}});require(["jquery","xwiki-meta","tree"],function(b,c){var a=function(h){var g=b(this);if(g.find(".deleteWarningXClass").length==0){return}var d=function(){var m=b(this);var o=m.find(".deleteTree");if(o.length){var k=o.data("job-answer-properties-data");var p=o.jstree().get_selected(true);k.selectAllFreePages=false;for(var l=0;l<p.length;++l){var n=p[l];if(n.id=="freePages"){k.selectAllFreePages=true}else{k.selectedDocuments.push(n.id)}}return k}};var f=g.find(".form-question");if(f.length){var j=f.find(".deleteTree");if(j.length){j.addClass("jstree-no-links");f.data("job-answer-properties-extra",d);var i=function(){var n=j.jstree();var k=n.get_json(j,{flat:true});for(var l=0;l<k.length;l++){var m=k[l];if(typeof m.data!="undefined"&&m.data.type=="object"){var o=n.get_node(m.id,true);o.find(".jstree-checkbox").remove()}}};j.on("create_node.jstree",i);var e={selectedDocuments:[],selectAllFreePages:false};j.data("job-answer-properties-data",e);j.xtree({plugins:["checkbox"],core:{themes:{icons:true,dots:true}}});f.find(".btSelectAllTree").click(function(k){k.preventDefault();j.jstree().check_all();i()});j.on("after_open.jstree",i);f.find(".btUnselectAllTree").click(function(k){k.preventDefault();j.jstree().uncheck_all();i()})}}};b(".ui-question").each(function(){var d=b(this);d.on("job:question:loaded",a);a.bind(d)(null)})});