/*!
#set ($jsExtension = '.min.js')
#if (!$services.debug.minify)
  #set ($jsExtension = '.js')
#end
*/
require.config({paths:{jsTree:'$!services.webjars.url("jstree", "jstree$jsExtension")',JobRunner:'$!services.webjars.url("org.xwiki.platform:xwiki-platform-job-webjar", "jobRunner$jsExtension")',"tree-finder":'$!services.webjars.url("org.xwiki.platform:xwiki-platform-tree-webjar", "finder$jsExtension")',tree:'$!services.webjars.url("org.xwiki.platform:xwiki-platform-tree-webjar", "tree$jsExtension")'},shim:{jsTree:{deps:["jquery"]}}});require(["jquery","xwiki-meta","tree"],function(b,c){var a=function(h){var g=b(this);if(g.find(".deleteWarningExtensions").length==0){return}var d=function(){var l=b(this);var n=l.find(".deleteTree");if(n.length){var j=n.data("job-answer-properties-data");var o=n.jstree().get_selected(true);j.selectAllFreePages=false;for(var k=0;k<o.length;++k){var m=o[k];if(m.data.type=="extension"){j.selectedExtensions.push(m.id)}else{if(m.data.type=="page"){j.selectedDocuments.push(m.id)}else{if(m.id=="freePages"){j.selectAllFreePages=true}}}}return j}};var f=g.find(".form-question");if(f.length){var i=f.find(".deleteTree");if(i.length){f.data("job-answer-properties-extra",d);var e={selectedExtensions:[],selectedDocuments:[],selectAllFreePages:false,selectAllExtensions:false};i.data("job-answer-properties-data",e);i.xtree({plugins:["checkbox"],core:{themes:{icons:true,dots:true}}});i.on("changed.jstree",function(j){e.selectAllExtensions=false});f.find(".btSelectAllTree").click(function(j){j.preventDefault();i.jstree().check_all();e.selectAllExtensions=true});f.find(".btUnselectAllTree").click(function(j){j.preventDefault();i.jstree().uncheck_all()})}}};b(".ui-question").each(function(){var d=b(this);d.on("job:question:loaded",a);a.bind(d)(null)})});